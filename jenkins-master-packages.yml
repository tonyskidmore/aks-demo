---
- name: install packages
  yum:
    name: "{{ packages }}"
    state: latest
  vars:
    packages:
    - git
    - unzip
    - python-setuptools
    - libselinux-python
    - libsemanage-python
  become: yes

- name: install pip
  easy_install:
    name: pip
    state: latest
  become: yes

- name: update pip to latest
  pip:
    name: pip
    state: latest
    umask: "0022"
  become: yes

# required for hashi_vault lookup https://docs.ansible.com/ansible/latest/plugins/lookup/hashi_vault.html
# installing for testing for now
- name: install hashicorp vault python module
  pip:
    name: hvac
    umask: "0022"
  become: yes

# error installing openshift module - investigate later
#- name: install openshift module
#  pip:
#    name: openshift
#    umask: "0022"
#  become: yes

#- name: install PyYAML module - k8s module says it needs PyYAML >= 3.11 (3.10 installed by default)
#  pip:
#    name: PyYAML
#    umask: "0022"
#  become: yes

# errors - grrr - leave it off or maybe try yum option later
#- name: install azure-cli module
#  pip:
#    name: azure-cli
#    umask: "0022"
#  become: yes  